模操作转为位操作 2n 次方

=0.75 就会触发扩容

1.8 put数据时才会创建数组

  entry->node

数组>64 并且链长度>8  --->红黑树 ,, 两种情况扩容(1.负债因子, 2,链表>8)  ß   扩容了没用才升级红黑树. rehash老在一个位置

只看数据的元素>0.75

但是不会到正确的位置去, 只能从4->8  不能到5

改了key的数据, key都删不掉了



竞争不激烈的情况

Segment 是个数组

同步扩容, 都能扩容, 渐进式扩容  redis?

有的buget还没扩容, 它就去帮忙,



即初始默认为 16 个桶

 Hash 数据加链表